<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<th:block th:replace="~{fragments/header :: header('Manage Admins - Hari World')}"></th:block>

<body class="bg-light">

	<th:block th:replace="~{fragments/navbar :: navbar}"></th:block>
	
	<!-- Flash Message -->
	<div class="container mt-2" th:if="${message != null}">
		<div class="alert alert-dismissible fade show"
			 role="alert"
			 th:classappend="' alert-' + ${messageType != null ? messageType : 'info'}">
			<span th:text="${message}"></span>
			<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
		</div>
	</div>
	
	<main class="container my-5">
		<!-- Page Header -->
		<div class="mb-4">
			<h1 class="fw-bold">Manage Admins</h1>
			<p class="text-muted">View, edit, and control admin accounts</p>
		</div>
		<!-- Admins Table -->
		<div class="card shadow-sm">
			<div class="card-header d-flex justify-content-between align-items-center">
				<h5 class="mb-0">Admin Users</h5>
				<a href="/admin/admin/new" class="btn btn-sm btn-primary">
					<i class="bi bi-person-plus"></i> Add Admin
				</a>
			</div>
			<div class="table-responsive">
				<table class="table table-hover align-middle mb-0">
					<thead class="table-light">
					<tr>
						<th>#</th>
						<th>Name</th>
						<th>Username</th>
						<th>Email</th>
						<th>Role</th>
						<th>Status</th>
						<th class="text-end">Actions</th>
					</tr>
					</thead>
					<tbody>
					<tr th:each="admin, stat : ${admins}">
						<td th:text="${stat.count}">1</td>
						<td th:text="${admin.profile != null ? admin.profile.name : '-'}">Name</td>
						<td th:text="${admin.username}">username</td>
						<td>
							<span th:if="${admin.profile != null}" th:text="${admin.profile.email}"></span>
							<span th:if="${admin.profile == null}" class="text-muted">-</span>
						</td>
						<td>
							<span class="badge bg-dark" th:if="${admin.role == 'SUPERADMIN'}">SUPERADMIN</span>
							<span class="badge bg-secondary" th:if="${admin.role == 'ADMIN'}">ADMIN</span>
						</td>
						<td>
							<span class="badge bg-success" th:if="${admin.isEnabled}">Active</span>
							<span class="badge bg-danger" th:if="${!admin.isEnabled}">Disabled</span>
						</td>
						<!-- ACTIONS -->
						<td class="text-end">
							<!-- Edit Admin -->
							<a th:href="@{'/admin/admins/edit/' + ${admin.id}}"
							   class="btn btn-sm btn-outline-primary me-1" title="Edit Admin">
								<i class="bi bi-pencil"></i>
							</a>
							<!-- Enable -->
							<a th:if="${!admin.isEnabled}" th:href="@{'/admin/admins/enable/' + ${admin.id}}"
							   class="btn btn-sm btn-outline-success me-1" onclick="return confirm('Enable this admin?')"
							   title="Enable">
								<i class="bi bi-person-check"></i>
							</a>
							<!-- Disable -->
							<a th:if="${admin.isEnabled}" th:href="@{'/admin/admins/disable/' + ${admin.id}}"
							   class="btn btn-sm btn-outline-warning me-1" onclick="return confirm('Disable this admin?')"
							   title="Disable">
								<i class="bi bi-person-x"></i>
							</a>
							<!-- Delete Admin -->
							<a th:href="@{'/admin/admins/delete/' + ${admin.id}}" class="btn btn-sm btn-outline-danger"
							   onclick="return confirm('⚠️ Permanently delete this admin?')"  title="Delete Admin">
								<i class="bi bi-trash"></i>
							</a>
						</td>
					</tr>
					<tr th:if="${#lists.isEmpty(admins)}">
						<td colspan="7" class="text-center text-muted py-4">
							No admin accounts found
						</td>
					</tr>
					</tbody>
				</table>
			</div>
		</div>
		<!-- Back -->
		<div class="mt-4">
			<a href="/admin/dashboard" class="btn btn-outline-secondary">
				<i class="bi bi-arrow-left"></i> Back to Dashboard
			</a>
		</div>
	</main>

	<th:block th:replace="~{fragments/footer :: footer}"></th:block>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>